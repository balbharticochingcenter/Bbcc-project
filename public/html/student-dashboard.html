<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard | BBCC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- CSS START --- */
        :root {
            --primary: #38bdf8;
            --dark: #0f172a;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(circle at top, #1e293b, #0f172a);
            color: white;
            min-height: 100vh;
        }

        /* Navbar & Header (Same as Login Page) */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 5%;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo-ring {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #38bdf8, #818cf8, #38bdf8);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .logo-ring:hover { transform: scale(1.1); }
        .logo { width: 50px; border-radius: 50%; }

        .brand-info { text-align: center; }
        .glow-text { margin: 0; font-size: 1.5rem; color: #fff; text-shadow: 0 0 10px var(--primary); }
        .powered-by { font-size: 0.7rem; color: #94a3b8; letter-spacing: 2px; }

        /* Dashboard Content */
        .container { padding: 40px 5%; text-align: center; }
        .welcome-card {
            background: var(--glass);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }

        /* Result Section */
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .stat-card {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid var(--primary);
        }
        .stat-card h3 { color: #94a3b8; font-size: 0.9rem; margin-bottom: 10px; }
        .stat-card p { font-size: 1.8rem; font-weight: bold; margin: 0; }

        /* Profile Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            backdrop-filter: blur(8px);
        }
        .modal-content {
            background: #1e293b;
            width: 90%;
            max-width: 450px;
            margin: 50px auto;
            border-radius: 25px;
            padding: 30px;
            position: relative;
            border: 1px solid var(--primary);
            text-align: center;
        }
        .profile-img-large {
            width: 120px; height: 120px;
            border-radius: 50%;
            border: 4px solid var(--primary);
            margin-top: -80px;
            background: #0f172a;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 0.9rem;
        }
        .info-label { color: #94a3b8; }
        .info-value { color: #fff; font-weight: 600; }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 25px; cursor: pointer; }

        /* Footer (Same as Home) */
        .modern-footer { background: #0f172a; padding: 50px 5% 20px; border-top: 1px solid var(--glass); margin-top: 50px; }
        .footer-row { display: flex; flex-wrap: wrap; justify-content: space-between; gap: 30px; }
        .footer-col { flex: 1; min-width: 250px; }
        .footer-bottom { text-align: center; margin-top: 30px; color: #64748b; font-size: 0.8rem; }
        .dev-credit span { color: var(--primary); font-weight: bold; }

        .logout-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-left">
            <div class="logo-ring" onclick="openProfile()">
                <img src="/assets/logo.png" id="navLogo" class="logo" alt="Logo">
            </div>
        </div>
        <div class="nav-center">
            <div class="brand-info">
                <h1 class="glow-text">BBCC Dashboard</h1>
                <span class="powered-by">STUDENT PORTAL</span>
            </div>
        </div>
        <div class="nav-right">
            <button onclick="logout()" style="background:none; border:none; color:#94a3b8; cursor:pointer;">
                <i class="fa-solid fa-power-off"></i> Logout
            </button>
        </div>
    </nav>

    <div class="container">
        <div class="welcome-card">
            <h1 id="welcomeName">Welcome, Student!</h1>
            <p>Class: <span id="displayClass" style="color:var(--primary)">-</span></p>
        </div>

        <h2 style="text-align: left;"><i class="fa-solid fa-chart-line"></i> Academic Performance</h2>
        <div class="result-grid">
            <div class="stat-card">
                <h3>MARKS OBTAINED</h3>
                <p id="resMarks">00</p>
            </div>
            <div class="stat-card">
                <h3>TOTAL MARKS</h3>
                <p id="resTotal">00</p>
            </div>
            <div class="stat-card">
                <h3>DIVISION</h3>
                <p id="resDiv" style="color: #4ade80;">-</p>
            </div>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeProfile()">&times;</span>
            <img src="" id="profPhoto" class="profile-img-large">
            <h2 id="profFullName" style="margin: 10px 0 5px;">-</h2>
            <p id="profRole" style="color: var(--primary); text-transform: uppercase; font-size: 0.8rem; margin-bottom: 20px;">STUDENT</p>

            <div class="info-row"><span class="info-label">Student ID</span><span class="info-value" id="profID">-</span></div>
            <div class="info-row"><span class="info-label">Password</span><span class="info-value" id="profPass">-</span></div>
            <div class="info-row"><span class="info-label">Mobile</span><span class="info-value" id="profMobile">-</span></div>
            <div class="info-row"><span class="info-label">Class</span><span class="info-value" id="profClass">-</span></div>
            <div class="info-row"><span class="info-label">Fees Status</span><span class="info-value" id="profFees">-</span></div>
            <div class="info-row"><span class="info-label">Join Date</span><span class="info-value" id="profJoin">-</span></div>

            <button class="logout-btn" onclick="logout()">Logout Account</button>
        </div>
    </div>

    <footer class="modern-footer">
        <div class="footer-container">
            <div class="footer-row">
                <div class="footer-col">
                    <h3>BBCC Portal</h3>
                    <p>Shaping the future of students through digital excellence.</p>
                </div>
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <p>Contact Support: +91 9868698696</p>
                </div>
            </div>
            <div class="footer-bottom">
                <hr style="border: 0.5px solid rgba(255,255,255,0.1);">
                <p class="dev-credit">Website Developed by <span>Santosh Sir "Ethical Hacker"</span></p>
            </div>
        </div>
    </footer>

    <script>
        // Data Load Karo (LocalStorage se)
        document.addEventListener('DOMContentLoaded', () => {
            const userData = JSON.parse(localStorage.getItem('userData'));

            if (!userData) {
                alert("Please login first!");
                window.location.href = "/";
                return;
            }

            // Dashboard par data bharna
            document.getElementById('welcomeName').innerText = `Welcome, ${userData.fname}!`;
            document.getElementById('displayClass').innerText = userData.studentClass || "Not Assigned";
            document.getElementById('resMarks').innerText = userData.marksObtained || "0";
            document.getElementById('resTotal').innerText = userData.totalMarks || "500";
            document.getElementById('resDiv').innerText = userData.division || "N/A";

            // Profile Modal mein data bharna
            document.getElementById('profPhoto').src = userData.profilePhoto || "/assets/default-user.png";
            document.getElementById('profFullName').innerText = `${userData.fname} ${userData.mname || ''} ${userData.lname || ''}`;
            document.getElementById('profID').innerText = userData.username;
            document.getElementById('profPass').innerText = userData.password;
            document.getElementById('profMobile').innerText = userData.mobile || "N/A";
            document.getElementById('profClass').innerText = userData.studentClass || "N/A";
            document.getElementById('profFees').innerText = userData.paymentStatus || "Unpaid";
            document.getElementById('profJoin').innerText = new Date(userData.joinDate).toLocaleDateString();
        });

        function openProfile() { document.getElementById('profileModal').style.display = "block"; }
        function closeProfile() { document.getElementById('profileModal').style.display = "none"; }

        function logout() {
            localStorage.clear();
            window.location.href = "/";
        }
    </script>
</body>
</html>
