<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin dasbord</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://code.responsivevoice.org/responsivevoice.js"></script>
    <link rel="stylesheet" href="admin.css">
</head>
<body onload="initDashboard()">

    <header class="magical-header">
    <div class="logo-container">
        <img id="db-logo" src="" alt="Logo" class="ring-logo">
    </div>
    <div class="title-container">
        <h1 id="db-title" class="glow-text">Loading...</h1>
        <span id="db-subtitle" class="sub-text"></span>
    </div>
    <button onclick="logoutAdmin()" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
</header>
<div class="dashboard">

    <div class="button-group" data-label="System Control">
        <button id="openAdminProfileBtn" class="btn-primary" style="background: #34495e;">
            <i class="fas fa-user-shield"></i> Admin Profile
        </button>
        
        <button id="openModalBtn" class="btn-primary">
            <i class="fas fa-cogs"></i> System Settings
        </button>
        <button id="openSliderBtn" class="btn-primary" style="background: #6c5ce7;">
        <i class="fas fa-images"></i> Home Slider
    </button>
        <button id="openClassSystemBtn" class="btn-primary" style="background: #e67e22;">
    <i class="fas fa-th-large"></i> Class System
</button>
    </div>

    <div class="button-group" data-label="Teacher Management">
          
    </div>

    <div class="button-group" data-label="Student Management">
        <button id="openStudentDashboardBtn" class="btn-primary" "background:#2ecc71; display:none;">
    ðŸ“Š Student Dashboard
</button>
    </div>
</div>


    <div id="systemModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form id="adminForm">
                <h3 style="border-bottom: 2px solid #6c5ce7;">Header Branding</h3>
                <input type="file" id="logoInput" accept="image/*">
                <input type="text" name="title" id="form-title" placeholder="Coaching Name (Title)">
                <input type="text" name="sub_title" id="form-subtitle" placeholder="Sub Title (Slogan)">
                
                <h3 style="border-bottom: 2px solid #e84393; margin-top: 20px;">Footer Details</h3>
                <input type="text" name="contact" id="form-contact" placeholder="WhatsApp Number">
                <input type="text" name="call_no" id="form-call" placeholder="Calling Number">
                <input type="email" name="gmail" id="form-gmail" placeholder="Official Email">
                <input type="url" name="facebook" id="form-facebook" placeholder="Facebook URL">
                <input type="text" name="help" id="form-help" placeholder="Help Line / Address">
               <div class="form-group">
    <label>Groq AI API Key:</label>
    <input type="password" id="set-groq-key" placeholder="gsk_xxxxxx...">
</div>
                
                <button type="submit" class="btn-update">Save All Settings</button>
            </form>
        </div>
    </div>

    
<div id="classSystemModal" class="modal">
    <div class="modal-content" style="max-width: 800px; text-align: center;">
        <span class="close" onclick="closeModal('classSystemModal')">&times;</span>
        <h3 style="color: #6c5ce7; margin-bottom: 20px;"><i class="fas fa-layer-group"></i> Select Class to Manage</h3>
        <div id="class_button_grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 15px;">
            </div>
    </div>
</div>

<div id="classConfigModal" class="modal">
    <div class="modal-content" style="max-width: 900px;">
        <span class="close" onclick="closeModal('classConfigModal')">&times;</span>
        <h3 id="current_editing_class" style="border-bottom: 2px solid #e67e22; padding-bottom: 10px;">Class: ---</h3>
        
        <form id="classDetailsForm">
            <input type="hidden" id="config_target_class">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                    <label><b>Class Banner (png/jpeg):</b></label>
                    <input type="file" id="cls_banner" accept="image/png, image/jpeg, image/jpg" style="width: 100%;">
                </div>
                <div>
                    <label><b>Intro Video (YouTube Link):</b></label>
                    <input type="text" id="cls_intro" placeholder="YouTube Link" style="width: 100%;">
                </div>
            </div>

            <h4 style="margin-top: 25px; color: #34495e;">Subjects & Video Links</h4>
            <p style="font-size: 12px; color: #666;">Check the subject to add YouTube links and see assigned teacher.</p>
            
            <div id="subject_config_container" style="margin-top: 15px;">
                </div>

            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button type="submit" class="btn-update" style="background:#2ecc71; flex:1;">Save Everything</button>
                <button type="button" onclick="deleteClassConfig()" class="btn-update" style="background:#e74c3c; flex:1;">Clear Data</button>
            </div>
        </form>
    </div>
</div>

    
    
    <div id="adminProfileModal" class="modal">
    <div class="modal-content" style="max-width: 500px;">
        <span class="close" onclick="closeModal('adminProfileModal')">&times;</span>
        <form id="adminProfileForm">
            <h3 style="border-bottom: 2px solid #34495e; margin-bottom: 15px;">
                <i class="fas fa-user-circle"></i> Admin Profile Settings
            </h3>
            
            <label>Admin Name</label>
            <input type="text" name="admin_name" id="adm_name" placeholder="Full Name" required>
            
            <label>User ID</label>
            <input type="text" name="admin_userid" id="adm_userid" placeholder="User ID" required>
            
            <label>Password</label>
            <input type="text" name="admin_pass" id="adm_pass" placeholder="Password" required>
            
            <label>Mobile Number</label>
            <input type="text" name="admin_mobile" id="adm_mobile" placeholder="Mobile Number">
            
            <div style="margin-top: 20px;">
                <button type="submit" class="btn-update" style="background: #27ae60; width: 100%;">
                    Update Admin Profile
                </button>
            </div>
        </form>
    </div>
</div>
    <div id="sliderModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <span class="close" onclick="closeModal('sliderModal')">&times;</span>
        <h3 style="border-bottom: 2px solid #6c5ce7; margin-bottom: 15px;">
            <i class="fas fa-images"></i> Home Slider Settings
        </h3>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <label><b>Add New Slider Photo:</b></label>
            <input type="file" id="sliderInput" accept="image/*" style="margin-top:10px;">
            <button onclick="uploadSliderPhoto()" class="btn-update" style="margin-top:10px; background: #27ae60;">
                <i class="fas fa-plus"></i> Upload & Save
            </button>
        </div>

        <label><b>Current Slider Photos:</b></label>
        <div id="sliderPreviewContainer" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 10px; max-height: 300px; overflow-y: auto;">
            <p style="color:#888; font-size: 14px;">No photos added yet.</p>
        </div>
    </div>
</div>




<div id="studentDashboardModal" class="modal">
  <div class="modal-content" style="max-width:95%;">

    <span class="close">&times;</span>
    <h3>ðŸ“Š Student Dashboard (Excel View)</h3>

    <!-- FILTER ROW -->
    <div style="display:flex; gap:10px; margin-bottom:10px;">
        <select id="dash_class">
            <option value="">Select Class</option>
        </select>

        <select id="dash_year">
            <option value="">Select Year</option>
        </select>

        <button onclick="loadDashboardStudents()">Load</button>
        <button onclick="deleteLoadedClass()">ðŸ—‘ Delete Loaded Class</button>
    </div>

    <!-- TABLE -->
    <div style="overflow:auto; max-height:70vh;">
        <table border="1" width="100%" id="dashboardTable">
            <thead>
                <tr>
                    <th>Photo</th>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Pass</th>
                    <th>Class</th>
                    <th>DOJ</th>
                    <th>Fees</th>
                    <th>Exam Date</th>
                    <th>Total</th>
                    <th>Obt</th>
                    <th>Div</th>
                    <th>Save</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody id="dashboardBody"></tbody>
        </table>
    </div>

  </div>
</div>

<div id="feesExcelModal" class="modal">
  <div class="modal-content" style="max-width:90%;">

    <span class="close" onclick="closeFeesExcel()">&times;</span>
    <h3>ðŸ“’ Student Monthly Fees Tracker</h3>

    <!-- STUDENT BASIC INFO -->
    <div id="feesStudentInfo" style="margin-bottom:10px;"></div>

    <!-- FILTER -->
    <div style="display:flex; gap:10px; margin-bottom:10px;">
        <select id="fees_year"></select>
        <select id="fees_month"></select>
        <button onclick="loadFeesExcel()">Load</button>
    </div>

    <!-- TABLE -->
    <table border="1" width="100%">
        <thead>
            <tr>
                <th>Month</th>
                <th>Fees</th>
                <th>Paid</th>
                <th>Due</th>
                <th>Status</th>
                <th>Save</th>
            </tr>
        </thead>
        <tbody id="feesExcelBody"></tbody>
    </table>

  </div>
</div>



    
    
    
<footer class="magical-footer">
    <div class="social-icons">
        <a id="foot-whatsapp" href="#"><i class="fab fa-whatsapp"></i></a>
        <a id="foot-facebook" href="#"><i class="fab fa-facebook"></i></a>
        <a id="foot-gmail" href="#"><i class="fas fa-envelope"></i></a>
        <a id="foot-call" href="#"><i class="fas fa-phone-alt"></i></a>
    </div>
    <p id="foot-help" style="font-size: 14px; color: #a29bfe;"></p>
    <p style="margin-top: 10px; font-size: 12px; opacity: 0.6;">&copy; 2024 BBCC Portal | Designed for Excellence</p>
</footer>
    <script src="adminscript.js"></script>

 <div id="bharti-ai-widget">
    <div id="bharti-chat-window" class="bharti-hidden">
        <div class="bharti-header">
            <div class="bharti-avatar-box">
                <img src="https://cdn-icons-png.flaticon.com/512/4140/4140037.png" alt="Bharti">
                <div class="bharti-status"></div>
            </div>
            <div class="bharti-info">
                <strong>Bharti AI</strong>
                <span>Online Expert</span>
            </div>
            <button onclick="toggleBhartiChat()" class="bharti-close">&times;</button>
        </div>
        <div id="bharti-messages" class="bharti-body">
            <div class="bharti-msg ai">Namaste! Main Bharti hoon. BBCC Portal mein aapka swagat hai. Main aapki kaise madad kar sakti hoon?</div>
        </div>
        <div class="bharti-footer">
            <input type="text" id="bharti-input" placeholder="Yahan likhein..." onkeypress="if(event.key==='Enter') sendBhartiMessage()">
            <button id="bharti-mic" onclick="bhartiListen()"><i class="fas fa-microphone"></i></button>
            <button id="bharti-send" onclick="sendBhartiMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
    <div id="bharti-launcher" onclick="toggleBhartiChat()">
        <div class="bharti-pulse"></div>
        <img src="https://cdn-icons-png.flaticon.com/512/4140/4140037.png" alt="AI">
    </div>
</div>
</body>
</html>
