<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - BBCC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body onload="initDashboard()">

    <header class="magical-header">
    <div class="logo-container">
        <img id="db-logo" src="" alt="Logo" class="ring-logo">
    </div>
    <div class="title-container">
        <h1 id="db-title" class="glow-text">Loading...</h1>
        <span id="db-subtitle" class="sub-text"></span>
    </div>
    <button onclick="logoutAdmin()" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
</header>
<div class="dashboard">
<div class="compressor-box" style="margin: 20px auto; max-width: 900px; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-top: 5px solid #6c5ce7;">
    <h3 style="text-align: center; color: #2d3436; margin-bottom: 15px;"><i class="fas fa-tools"></i> Image Auto-Crop & Compressor</h3>
    
    <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; align-items: center;">
        <input type="file" id="compInput" accept="image/*" style="border: 2px dashed #6c5ce7; padding: 10px; border-radius: 8px;">
        
        <select id="compType" style="padding: 12px; border-radius: 8px; border: 1px solid #dfe6e9; font-weight: bold;">
            <option value="logo">AS LOGO (Square Crop)</option>
            <option value="banner">AS BANNER (Wide Crop)</option>
            <option value="photo">AS PHOTO (Only Compress)</option>
        </select>

        <button onclick="processImage()" style="background: #6c5ce7; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s;">
            <i class="fas fa-file-download"></i> Process & Download
        </button>
    </div>
    <p id="compStatus" style="text-align: center; margin-top: 10px; font-weight: 500; color: #636e72;"></p>
    <canvas id="compCanvas" style="display:none;"></canvas>
</div>
    
    
    <div class="button-group" data-label="System Control">
        <button id="openAdminProfileBtn" class="btn-primary" style="background: #34495e;">
            <i class="fas fa-user-shield"></i> Admin Profile
        </button>
        
        <button id="openModalBtn" class="btn-primary">
            <i class="fas fa-cogs"></i> System Settings
        </button>
        <button id="openSliderBtn" class="btn-primary" style="background: #6c5ce7;">
        <i class="fas fa-images"></i> Home Slider
    </button>
        <button id="openClassSystemBtn" class="btn-primary" style="background: #e67e22;">
    <i class="fas fa-th-large"></i> Class System
</button>
    </div>

    <div class="button-group" data-label="Teacher Management">
        <button id="openTeacherBtn" class="btn-primary" style="background: #e84393;">
            <i class="fas fa-user-plus"></i> Teacher Reg
        </button>
        <button id="openTeacherDataBtn" class="btn-primary" style="background: #00cec9;">
            <i class="fas fa-file-invoice-dollar"></i> Salary/Data
        </button>
        <button id="openUpdateBtn" class="btn-primary" style="background: #fdcb6e; color: #000;">
            <i class="fas fa-edit"></i> Update/Delete
        </button>
    </div>

    <div class="button-group" data-label="Student Management">
        <button id="openStudentBtn" class="btn-primary" style="background: #6c5ce7;">
            <i class="fas fa-graduation-cap"></i> Student Reg
        </button>
        <button id="openStudentDataBtn" class="btn-primary" style="background: #2ecc71;">
            <i class="fas fa-user-graduate"></i> Fees/Data
        </button>
        <button id="openStudentUpdateBtn" class="btn-primary" style="background: #f1c40f; color: #000;">
            <i class="fas fa-user-edit"></i> Stu. Update
        </button>
        <button id="openResultBtn" class="btn-primary" style="background:#f39c12;">
            <i class="fas fa-poll-h"></i> Class Result
        </button>
    </div>
</div>


    <div id="systemModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form id="adminForm">
                <h3 style="border-bottom: 2px solid #6c5ce7;">Header Branding</h3>
                <input type="file" id="logoInput" accept="image/*">
                <input type="text" name="title" id="form-title" placeholder="Coaching Name (Title)">
                <input type="text" name="sub_title" id="form-subtitle" placeholder="Sub Title (Slogan)">
                
                <h3 style="border-bottom: 2px solid #e84393; margin-top: 20px;">Footer Details</h3>
                <input type="text" name="contact" id="form-contact" placeholder="WhatsApp Number">
                <input type="text" name="call_no" id="form-call" placeholder="Calling Number">
                <input type="email" name="gmail" id="form-gmail" placeholder="Official Email">
                <input type="url" name="facebook" id="form-facebook" placeholder="Facebook URL">
                <input type="text" name="help" id="form-help" placeholder="Help Line / Address">
                
                <button type="submit" class="btn-update">Save All Settings</button>
            </form>
        </div>
    </div>

    <div id="teacherModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form id="teacherForm">
                <h3>New Teacher Registration</h3>
                <input type="text" name="teacher_name" id="t_name" placeholder="Full Name" required>
                <div style="display:flex; gap:10px;">
                    <input type="text" name="teacher_id" id="t_id" placeholder="ID" readonly style="flex:1;">
                    <input type="text" name="pass" id="t_pass" placeholder="Password" readonly style="flex:1;">
                </div>
                <input type="text" name="mobile" placeholder="Mobile Number">
                <input type="file" id="t_photo" accept="image/*">
                <input type="number" name="salary" placeholder="Monthly Salary (Amount)">
                <input type="date" name="joining_date">
                <button type="submit" class="btn-update">Register Teacher</button>
            </form>
        </div>
    </div>

    <div id="dataModal" class="modal">
    <div class="modal-content" style="max-width: 1100px; width: 95%;">
        <span class="close">&times;</span>
        <h3 style="color: var(--primary-glow); margin-bottom: 20px;">
            <i class="fas fa-file-invoice-dollar"></i> Teacher Salary & Records
        </h3>
        
        <div id="teacherTableBody"></div> 
    </div>
</div>

    <div id="updateModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close">&times;</span>
            <h3>Search, Update or Delete</h3>
            <div style="display:flex; gap:10px; margin-bottom:20px;">
                <input type="text" id="search_tid" placeholder="Enter Teacher ID">
               <button type="button" onclick="searchTeacher()" class="btn-primary" style="margin:0; background: linear-gradient(135deg, #0984e3, #00cec9); box-shadow: 0 4px 15px rgba(9, 132, 227, 0.4); border: none;">
    <i class="fas fa-search"></i> Search
</button>
            </div>
            
            <form id="updateForm">
                <input type="hidden" name="teacher_id" id="up_id">
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <input type="text" name="teacher_name" id="up_name" placeholder="Name">
                    <div style="grid-column: span 2; display: flex; align-items: center; gap: 15px; background: #f9f9f9; padding: 10px; border-radius: 8px; margin-top: 10px;">
    <div>
        <label style="font-size: 12px; font-weight: bold;">Current Photo:</label><br>
        <img id="up_tview_photo" src="https://via.placeholder.com/80" style="width: 80px; height: 80px; border-radius: 5px; border: 2px solid #ddd; object-fit: cover;">
    </div>
    <div style="flex:1;">
        <label style="font-size: 12px; font-weight: bold;">Update Teacher Photo:</label>
        <input type="file" id="up_tphoto" accept="image/*" style="font-size: 12px;">
    </div>
</div>
                    <input type="text" name="mobile" id="up_mobile" placeholder="Mobile">
                    <input type="text" name="pass" id="up_pass" placeholder="Password">
                    <input type="number" name="salary" id="up_salary" placeholder="Salary Amount">
                </div>

                <p><b>Assign Classes:</b></p>
                <div class="checkbox-container" id="up_classes_div">
                    <label><input type="checkbox" name="classes" value="1st"> 1st</label>
                    <label><input type="checkbox" name="classes" value="2nd"> 2nd</label>
                    <label><input type="checkbox" name="classes" value="3rd"> 3rd</label>
                    <label><input type="checkbox" name="classes" value="4th"> 4th</label>
                    <label><input type="checkbox" name="classes" value="5th"> 5th</label>
                    <label><input type="checkbox" name="classes" value="6th"> 6th</label>
                    <label><input type="checkbox" name="classes" value="7th"> 7th</label>
                    <label><input type="checkbox" name="classes" value="8th"> 8th</label>
                    <label><input type="checkbox" name="classes" value="9th"> 9th</label>
                    <label><input type="checkbox" name="classes" value="10th"> 10th</label>
                    <label><input type="checkbox" name="classes" value="I.A."> I.A.</label>
                    <label><input type="checkbox" name="classes" value="I.Sc."> I.Sc.</label>
                    <label><input type="checkbox" name="classes" value="I.Com."> I.Com.</label>
                    <label><input type="checkbox" name="classes" value="B.A."> B.A.</label>
                    <label><input type="checkbox" name="classes" value="B.Sc."> B.Sc.</label>
                    <label><input type="checkbox" name="classes" value="B.Com."> B.Com.</label>
                </div>

                <p><b>Assign Subjects:</b></p>
                <div class="checkbox-container" id="up_subjects_div">
                    <label><input type="checkbox" name="subjects" value="Hindi"> Hindi</label>
                    <label><input type="checkbox" name="subjects" value="English"> English</label>
                    <label><input type="checkbox" name="subjects" value="Maths"> Maths</label>
                    <label><input type="checkbox" name="subjects" value="Sanskrit"> Sanskrit</label>
                    <label><input type="checkbox" name="subjects" value="Science"> Science</label>
                    <label><input type="checkbox" name="subjects" value="Social Science"> Social Science</label>
                    <label><input type="checkbox" name="subjects" value="Physics"> Physics</label>
                    <label><input type="checkbox" name="subjects" value="Chemistry"> Chemistry</label>
                    <label><input type="checkbox" name="subjects" value="Biology"> Biology</label>
                    <label><input type="checkbox" name="subjects" value="History"> History</label>
                    <label><input type="checkbox" name="subjects" value="Geography"> Geography</label>
                    <label><input type="checkbox" name="subjects" value="Economics"> Economics</label>
                    <label><input type="checkbox" name="subjects" value="Accountancy"> Accountancy</label>
                    <label><input type="checkbox" name="subjects" value="Business Studies"> Business Studies</label>
                    <label><input type="checkbox" name="subjects" value="Philosophy"> Philosophy</label>
                </div>

                <div style="display:flex; gap:10px; margin-top:15px;">
                    <button type="submit" class="btn-update" style="background:#2ecc71;">Save Changes</button>
                    <button type="button" onclick="deleteTeacher()" class="btn-update" style="background:#e74c3c;">Delete Account</button>
                </div>
            </form>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="modal-content" style="text-align: center; max-width: 400px;">
            <span class="close" onclick="document.getElementById('profileModal').style.display='none'">&times;</span>
            <div id="profileData"></div>
        </div>
    </div>
    <div id="studentModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('studentModal')">&times;</span>
        <form id="studentForm">
            <h3>New Student Registration</h3>
            <input type="text" name="student_name" id="s_name" placeholder="Student Full Name" required>
            <div style="display:flex; gap:10px;">
                <input type="text" name="student_id" id="s_id" placeholder="Student ID" readonly style="flex:1;">
                <input type="text" name="pass" id="s_pass" placeholder="Password" readonly style="flex:1;">
            </div>
           <div style="margin-top: 10px;">
    <label style="font-size: 13px; font-weight: bold; color: #555;">Student Photo:</label>
    <input type="file" id="s_photo" accept="image/*" style="padding: 5px; border: 1px solid #ddd;">
</div>
            <input type="text" name="parent_name" placeholder="Parent Name">
            <input type="text" name="mobile" placeholder="Student Mobile">
            <input type="text" name="parent_mobile" placeholder="Parent Mobile">
            <select name="student_class">
                <option value="">Select Class</option>
                <option value="1st">1st</option>
    <option value="2nd">2nd</option>
    <option value="3rd">3rd</option>
    <option value="4th">4th</option>
    <option value="5th">5th</option>
    <option value="6th">6th</option>
    <option value="7th">7th</option>
    <option value="8th">8th</option>
    <option value="9th">9th</option>
    <option value="10th">10th</option>
                        <option value="I.Sc">I.Sc</option>
                        <option value="I.A">I.A</option>
                        <option value="I.COM">I.COM</option>
                        <option value="B.Sc">I.Sc</option>
                        <option value="B.A">I.A</option>
                        <option value="B.COM">I.COM</option>
                </select>
            <input type="number" name="fees" placeholder="Monthly Fees Amount">
            <button type="submit" class="btn-update">Register Student</button>
            <label style="font-size: 12px; color: #666; margin-top: 10px; display: block;">Date of Joining:</label>
<input type="date" name="joining_date" required>
        </form>
    </div>
</div>

<div id="studentDataModal" class="modal">
    <div class="modal-content" style="max-width: 1100px; width: 95%;">
        <span class="close" onclick="closeModal('studentDataModal')">&times;</span>
        <h3 style="color: var(--primary-glow);"><i class="fas fa-coins"></i> Student Fees Records</h3>
     <div id="studentTableBody" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; margin-top:20px;"></div>
    </div>
</div>
    <div id="studentUpdateModal" class="modal">
    <div class="modal-content" style="max-width: 900px;">
        <span class="close" onclick="closeModal('studentUpdateModal')">&times;</span>
        <h3><i class="fas fa-user-edit"></i> Student Search, Update or Delete</h3>
        
        <div style="display:flex; gap:10px; margin-bottom:20px;">
            <input type="text" id="search_sid" placeholder="Enter Student ID (e.g. STU1234)">
            <button type="button" onclick="searchStudent()" class="btn-primary" style="margin:0; background:#6c5ce7;">Search Student</button>
        </div>
        
        <form id="studentUpdateForm">
            <input type="hidden" name="student_id" id="up_sid">
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <div>
                    <label>Student Name</label>
                    <input type="text" name="student_name" id="up_sname" placeholder="Name">
                </div>
                <div>
                    <label>Password</label>
                    <input type="text" name="pass" id="up_spass" placeholder="Password">
                </div>
                <div>
                    <label>Student Mobile</label>
                    <input type="text" name="mobile" id="up_smobile" placeholder="Mobile">
                </div>
                <div>
                    <label>Parent Name</label>
                    <input type="text" name="parent_name" id="up_pname" placeholder="Parent Name">
                </div>
                <div>
                    <label>Parent Mobile</label>
                    <input type="text" name="parent_mobile" id="up_pmobile" placeholder="Parent Mobile">
                </div>
                <div>
                    <label>Monthly Fees</label>
                    <input type="number" name="fees" id="up_sfees" placeholder="Fees Amount">
                </div>
                <div>
                    <label>Joining Date</label>
                    <input type="date" name="joining_date" id="up_sdoj">
                </div>

<div style="grid-column: span 2; display: flex; align-items: center; gap: 15px; background: #f9f9f9; padding: 10px; border-radius: 8px;">
    <div>
        <label>Current Photo:</label><br>
        <img id="up_sview_photo" src="https://via.placeholder.com/80" style="width: 80px; height: 80px; border-radius: 5px; border: 2px solid #ddd; object-fit: cover;">
    </div>
    <div style="flex:1;">
        <label>Update New Photo:</label>
        <input type="file" id="up_sphoto" accept="image/*">
    </div>
</div>
                
                <div>
                    <label>Class</label>
                    <select name="student_class" id="up_sclass">
                        <option value="1st">1st</option>
    <option value="2nd">2nd</option>
    <option value="3rd">3rd</option>
    <option value="4th">4th</option>
    <option value="5th">5th</option>
    <option value="6th">6th</option>
    <option value="7th">7th</option>
    <option value="8th">8th</option>
    <option value="9th">9th</option>
    <option value="10th">10th</option>
                        <option value="I.Sc">I.Sc</option>
                        <option value="I.A">I.A</option>
                        <option value="I.COM">I.COM</option>
                        <option value="B.Sc">I.Sc</option>
                        <option value="B.A">I.A</option>
                        <option value="B.COM">I.COM</option>
                    </select>
                </div>
                
            </div>

            <div style="display:flex; gap:10px; margin-top:20px;">
                <button type="submit" class="btn-update" style="background:#2ecc71; flex:1;">Save Changes</button>
                <button type="button" onclick="deleteStudent()" class="btn-update" style="background:#e74c3c; flex:1;">Delete Student</button>
            </div>
        </form>
    </div>
</div>


<div id="classSystemModal" class="modal">
    <div class="modal-content" style="max-width: 800px; text-align: center;">
        <span class="close" onclick="closeModal('classSystemModal')">&times;</span>
        <h3 style="color: #6c5ce7; margin-bottom: 20px;"><i class="fas fa-layer-group"></i> Select Class to Manage</h3>
        <div id="class_button_grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 15px;">
            </div>
    </div>
</div>

<div id="classConfigModal" class="modal">
    <div class="modal-content" style="max-width: 900px;">
        <span class="close" onclick="closeModal('classConfigModal')">&times;</span>
        <h3 id="current_editing_class" style="border-bottom: 2px solid #e67e22; padding-bottom: 10px;">Class: ---</h3>
        
        <form id="classDetailsForm">
            <input type="hidden" id="config_target_class">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                    <label><b>Class Banner (png/jpeg):</b></label>
                    <input type="file" id="cls_banner" accept="image/png, image/jpeg, image/jpg" style="width: 100%;">
                </div>
                <div>
                    <label><b>Intro Video (YouTube Link):</b></label>
                    <input type="text" id="cls_intro" placeholder="YouTube Link" style="width: 100%;">
                </div>
            </div>

            <h4 style="margin-top: 25px; color: #34495e;">Subjects & Video Links</h4>
            <p style="font-size: 12px; color: #666;">Check the subject to add YouTube links and see assigned teacher.</p>
            
            <div id="subject_config_container" style="margin-top: 15px;">
                </div>

            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button type="submit" class="btn-update" style="background:#2ecc71; flex:1;">Save Everything</button>
                <button type="button" onclick="deleteClassConfig()" class="btn-update" style="background:#e74c3c; flex:1;">Clear Data</button>
            </div>
        </form>
    </div>
</div>

    
    <div id="resultModal" class="modal">
    <div class="modal-content" style="max-width: 95%;">
        <span class="close" onclick="closeModal('resultModal')">&times;</span>
        <h3><i class="fas fa-graduation-cap"></i> Class-wise Result Manager</h3>
        
        <div style="background:#f8f9fa; padding:15px; border-radius:10px; display:flex; gap:15px; align-items:flex-end; margin-bottom:20px;">
            <div>
                <label>Select Class</label>
                <select id="res_class_filter" style="width:150px;">
                   <option value="1st">1st</option>
    <option value="2nd">2nd</option>
    <option value="3rd">3rd</option>
    <option value="4th">4th</option>
    <option value="5th">5th</option>
    <option value="6th">6th</option>
    <option value="7th">7th</option>
    <option value="8th">8th</option>
    <option value="9th">9th</option>
    <option value="10th">10th</option>
                        <option value="I.Sc">I.Sc</option>
                        <option value="I.A">I.A</option>
                        <option value="I.COM">I.COM</option>
                        <option value="B.Sc">I.Sc</option>
                        <option value="B.A">I.A</option>
                        <option value="B.COM">I.COM</option>
                </select>
            </div>
            <div>
                <label>Total Marks (Full)</label>
                <input type="number" id="bulk_total_marks" placeholder="e.g. 500" style="width:100px;">
            </div>
            <div>
                <label>Exam Date</label>
                <input type="date" id="bulk_exam_date">
            </div>
            <button onclick="filterClassForResults()" class="btn-primary" style="margin:0; background: linear-gradient(135deg, #0984e3, #00cec9); box-shadow: 0 0 15px rgba(9, 132, 227, 0.5); border: none; color: white;">
    <i class="fas fa-search"></i> Search & Load Class
</button>
        </div>

        <div style="overflow-x:auto;">
            <table class="diary-table" style="width:100%; border-collapse: collapse;">
                <thead style="background:#6c5ce7; color:white;">
                    <tr>
                        <th style="padding:10px;">ID/Roll</th>
                        <th>Student Name</th>
                        <th>Obtained Marks</th>
                        <th>Division</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="resultTableBody">
                    </tbody>
            </table>
        </div>
    </div>
</div>
    <div id="adminProfileModal" class="modal">
    <div class="modal-content" style="max-width: 500px;">
        <span class="close" onclick="closeModal('adminProfileModal')">&times;</span>
        <form id="adminProfileForm">
            <h3 style="border-bottom: 2px solid #34495e; margin-bottom: 15px;">
                <i class="fas fa-user-circle"></i> Admin Profile Settings
            </h3>
            
            <label>Admin Name</label>
            <input type="text" name="admin_name" id="adm_name" placeholder="Full Name" required>
            
            <label>User ID</label>
            <input type="text" name="admin_userid" id="adm_userid" placeholder="User ID" required>
            
            <label>Password</label>
            <input type="text" name="admin_pass" id="adm_pass" placeholder="Password" required>
            
            <label>Mobile Number</label>
            <input type="text" name="admin_mobile" id="adm_mobile" placeholder="Mobile Number">
            
            <div style="margin-top: 20px;">
                <button type="submit" class="btn-update" style="background: #27ae60; width: 100%;">
                    Update Admin Profile
                </button>
            </div>
        </form>
    </div>
</div>
    <div id="sliderModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <span class="close" onclick="closeModal('sliderModal')">&times;</span>
        <h3 style="border-bottom: 2px solid #6c5ce7; margin-bottom: 15px;">
            <i class="fas fa-images"></i> Home Slider Settings
        </h3>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <label><b>Add New Slider Photo:</b></label>
            <input type="file" id="sliderInput" accept="image/*" style="margin-top:10px;">
            <button onclick="uploadSliderPhoto()" class="btn-update" style="margin-top:10px; background: #27ae60;">
                <i class="fas fa-plus"></i> Upload & Save
            </button>
        </div>

        <label><b>Current Slider Photos:</b></label>
        <div id="sliderPreviewContainer" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 10px; max-height: 300px; overflow-y: auto;">
            <p style="color:#888; font-size: 14px;">No photos added yet.</p>
        </div>
    </div>
</div>


    
<footer class="magical-footer">
    <div class="social-icons">
        <a id="foot-whatsapp" href="#"><i class="fab fa-whatsapp"></i></a>
        <a id="foot-facebook" href="#"><i class="fab fa-facebook"></i></a>
        <a id="foot-gmail" href="#"><i class="fas fa-envelope"></i></a>
        <a id="foot-call" href="#"><i class="fas fa-phone-alt"></i></a>
    </div>
    <p id="foot-help" style="font-size: 14px; color: #a29bfe;"></p>
    <p style="margin-top: 10px; font-size: 12px; opacity: 0.6;">&copy; 2024 BBCC Portal | Designed for Excellence</p>
</footer>
    <script src="adminscript.js"></script>
</body>
</html>
